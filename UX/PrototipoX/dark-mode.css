/* --- DARK MODE CORREGIDO Y ELEGANTE --- */

/* Paleta de colores:
   - Fondo Principal: #1C1C1E (Gris oscuro suave, estándar en iOS)
   - Fondo de Superficies: #2C2C2E (Gris ligeramente más claro para profundidad)
   - Bordes/Divisores: #48484A (Gris medio para separación sutil)
   - Texto Principal: #F2F2F7 (Blanco cálido de iOS para máxima legibilidad)
   - Texto Secundario: #AEAEB2 (Gris claro de iOS con excelente contraste)
   - Acento Principal (Azul): #0A84FF (Azul vibrante y nativo de iOS)
*/

body.dark-mode {
    background: #1C1C1E;
}

body.dark-mode .app-screen,
body.dark-mode .profile-form-screen,
body.dark-mode .register-screen,
body.dark-mode .app-content,
body.dark-mode .form-content,
body.dark-mode .register-form {
    background: #1C1C1E; 
    color: #F2F2F7;
}

body.dark-mode .status-bar { 
    color: #F2F2F7; 
}

/* Superficies como cabeceras, tarjetas y modales */
body.dark-mode .app-header,
body.dark-mode .form-header,
body.dark-mode .card,
body.dark-mode .section-item,
body.dark-mode .alert-item,
body.dark-mode .news-card,
body.dark-mode .faq-item,
body.dark-mode .stat-card,
body.dark-mode .action-btn,
body.dark-mode .modal,
body.dark-mode .checklist-panel,
body.dark-mode .history-item {
    background: #2C2C2E;
    border-color: #48484A;
}

/* Estilos de Hover para superficies */
body.dark-mode .card:hover,
body.dark-mode .section-item:hover,
body.dark-mode .alert-item:hover,
body.dark-mode .news-card:hover,
body.dark-mode .faq-item:hover,
body.dark-mode .action-btn:hover {
    border-color: #0A84FF; 
}

/* Textos Principales */
body.dark-mode .header-info h1, 
body.dark-mode h3,
body.dark-mode .form-title,
body.dark-mode .section-name,
body.dark-mode .alert-title,
body.dark-mode .news-title,
body.dark-mode .faq-question,
body.dark-mode .modal-title,
body.dark-mode .checklist-title,
body.dark-mode .action-label,
body.dark-mode .checkitem { 
    color: #F2F2F7;
}

/* Textos Secundarios */
body.dark-mode .header-info p,
body.dark-mode .form-subtitle,
body.dark-mode .section-description,
body.dark-mode .alert-description,
body.dark-mode .alert-time,
body.dark-mode .news-excerpt,
body.dark-mode .news-meta,
body.dark-mode .faq-answer,
body.dark-mode .modal-content,
body.dark-mode .stat-label,
body.dark-mode .nav-item { 
    color: #AEAEB2; 
}

/* Barras de Progreso - CORREGIDO */
body.dark-mode .progress-bar { background: #48484A; }
body.dark-mode .progress-fill { background: #0A84FF; }
body.dark-mode .progress-percentage { color: #0A84FF; }
/* Se eleva la importancia del título para que no se pierda */
body.dark-mode .progress-title { color: #F2F2F7; } 


/* Iconos de acción */
body.dark-mode .action-icon { background: #1C1C1E; color: #AEAEB2; }
body.dark-mode .action-btn:hover .action-icon { background: #0A84FF; color: #FFFFFF; }

/* Navegación inferior */
body.dark-mode .bottom-nav {
    background: #2C2C2E;
    border-top-color: #48484A;
}
body.dark-mode .nav-item.active { color: #0A84FF; }
/* Filtro CSS ajustado para el color de ícono inactivo */
body.dark-mode .nav-icon img { 
    filter: invert(75%) sepia(1%) saturate(1596%) hue-rotate(200deg) brightness(88%) contrast(89%);
}
body.dark-mode .nav-item.active .nav-icon img { filter: none; }

/* Formularios e Inputs */
body.dark-mode .form-label { color: #AEAEB2; }
body.dark-mode .form-input, 
body.dark-mode .form-select, 
body.dark-mode .search-input {
    background: #1C1C1E;
    border: 1px solid #48484A;
    color: #F2F2F7;
}
body.dark-mode .form-input:focus, 
body.dark-mode .form-select:focus, 
body.dark-mode .search-input:focus {
    border-color: #0A84FF;
    background: #2C2C2E;
    box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.3);
}
body.dark-mode .form-input::placeholder { color: #5f6368; }

/* Botones */
body.dark-mode .btn-primary { 
    background: #0A84FF;
    color: #FFFFFF;
    font-weight: 600;
    border: none;
}
body.dark-mode .btn-primary:hover { 
    background: #3395ff;
}

body.dark-mode .btn-secondary {
    background: transparent;
    color: #0A84FF;
    border-color: #48484A;
}
body.dark-mode .btn-secondary:hover { 
    background: rgba(10, 132, 255, 0.1);
    border-color: #0A84FF;
}

/* Filtros y Modales */
body.dark-mode .filter-pill {
    background: #48484A;
    color: #F2F2F7;
    border-color: transparent;
}
body.dark-mode .filter-pill:hover { background: #58585a; }
body.dark-mode .filter-pill.active { 
    background: #0A84FF; 
    color: #FFFFFF; 
    font-weight: 600; 
}

body.dark-mode .modal-overlay { background: rgba(28, 28, 30, 0.8); backdrop-filter: blur(10px); }
body.dark-mode .modal-btn.cancel { background: #48484A; color: #F2F2F7; }
body.dark-mode .modal-btn.confirm { 
    background: #0A84FF;
    color: #FFFFFF; 
    font-weight: 600; 
}

body.dark-mode .checklist-close { background: #48484A; color: #F2F2F7; }